<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Credit Card Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .card-gradient {
            background: linear-gradient(135deg, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 100%);
        }
        .utilization-bar {
            transition: width 0.3s ease;
        }
        .modal {
            backdrop-filter: blur(8px);
        }
        @media (max-width: 768px) {
            .bottom-nav {
                padding-bottom: env(safe-area-inset-bottom);
            }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-sm p-4">
        <h1 class="text-2xl font-bold text-center text-gray-800">Credit Card Tracker</h1>
    </header>

    <!-- Tab Navigation -->
    <nav class="bg-white border-b">
        <div class="flex">
            <button id="cardsTab" class="flex-1 py-3 text-center font-medium text-blue-600 border-b-2 border-blue-600">
                Cards
            </button>
            <button id="transactionsTab" class="flex-1 py-3 text-center font-medium text-gray-500">
                Transactions
            </button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="p-4 pb-24">
        <!-- Cards Section -->
        <div id="cardsSection">
            <button id="addCardBtn" class="w-full bg-blue-500 text-white py-3 px-4 rounded-lg mb-6 flex items-center justify-center gap-2 hover:bg-blue-600 transition-colors">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12h14"></path>
                </svg>
                Add New Card
            </button>

            <div id="cardsList" class="space-y-4">
                <!-- Cards will be dynamically inserted here -->
            </div>

            <div id="noCards" class="text-center py-12 text-gray-500" style="display: none;">
                <svg class="mx-auto mb-4 opacity-50" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect width="20" height="14" x="2" y="5" rx="2"></rect>
                    <path d="M2 10h20"></path>
                </svg>
                <p>No credit cards added yet</p>
            </div>
        </div>

        <!-- Transactions Section -->
        <div id="transactionsSection" style="display: none;">
            <button id="addTransactionBtn" class="w-full bg-green-500 text-white py-3 px-4 rounded-lg mb-6 flex items-center justify-center gap-2 hover:bg-green-600 transition-colors">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 5v14M5 12h14"></path>
                </svg>
                Add Transaction
            </button>

            <div id="transactionsList" class="space-y-3">
                <!-- Transactions will be dynamically inserted here -->
            </div>

            <div id="noTransactions" class="text-center py-12 text-gray-500" style="display: none;">
                <svg class="mx-auto mb-4 opacity-50" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M12 6v6l4 2"></path>
                </svg>
                <p>No transactions recorded yet</p>
            </div>
        </div>
    </main>

    <!-- Summary Stats -->
    <div id="summaryStats" class="fixed bottom-0 left-0 right-0 bg-white border-t p-4 bottom-nav" style="display: none;">
        <div class="grid grid-cols-3 gap-4 text-center">
            <div>
                <div id="totalBalance" class="text-lg font-semibold text-blue-600">₹0</div>
                <div class="text-xs text-gray-500">Total Balance</div>
            </div>
            <div>
                <div id="totalLimit" class="text-lg font-semibold text-green-600">₹0</div>
                <div class="text-xs text-gray-500">Total Limit</div>
            </div>
            <div>
                <div id="totalCards" class="text-lg font-semibold text-purple-600">0</div>
                <div class="text-xs text-gray-500">Cards</div>
            </div>
        </div>
    </div>

    <!-- Add Card Modal -->
    <div id="addCardModal" class="fixed inset-0 bg-black bg-opacity-50 modal flex items-center justify-center p-4 z-50" style="display: none;">
        <div class="bg-white rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto">
            <h3 class="text-lg font-semibold mb-4">Add New Card</h3>
            <div class="space-y-4">
                <input type="text" id="cardName" placeholder="Card Name (e.g., HDFC Regalia)" class="w-full p-3 border border-gray-300 rounded-lg">
                <input type="text" id="cardLastFour" placeholder="Last 4 digits" maxlength="4" class="w-full p-3 border border-gray-300 rounded-lg">
                <input type="number" id="cardLimit" placeholder="Credit Limit" class="w-full p-3 border border-gray-300 rounded-lg">
                <input type="number" id="cardBalance" placeholder="Current Balance" class="w-full p-3 border border-gray-300 rounded-lg">
                <input type="date" id="cardDueDate" class="w-full p-3 border border-gray-300 rounded-lg">
                <div>
                    <p class="text-sm text-gray-600 mb-2">Choose card color:</p>
                    <div id="colorPicker" class="flex gap-2 flex-wrap">
                        <!-- Color buttons will be inserted here -->
                    </div>
                </div>
                <div class="flex gap-2">
                    <button id="saveCardBtn" class="flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600">Add Card</button>
                    <button id="cancelCardBtn" class="flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Transaction Modal -->
    <div id="addTransactionModal" class="fixed inset-0 bg-black bg-opacity-50 modal flex items-center justify-center p-4 z-50" style="display: none;">
        <div class="bg-white rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto">
            <h3 class="text-lg font-semibold mb-4">Add Transaction</h3>
            <div class="space-y-4">
                <select id="transactionCard" class="w-full p-3 border border-gray-300 rounded-lg">
                    <option value="">Select Card</option>
                </select>
                <input type="text" id="transactionDesc" placeholder="Description" class="w-full p-3 border border-gray-300 rounded-lg">
                <input type="number" id="transactionAmount" placeholder="Amount" class="w-full p-3 border border-gray-300 rounded-lg">
                <select id="transactionType" class="w-full p-3 border border-gray-300 rounded-lg">
                    <option value="expense">Expense</option>
                    <option value="payment">Payment</option>
                </select>
                <select id="transactionCategory" class="w-full p-3 border border-gray-300 rounded-lg">
                    <option value="general">General</option>
                    <option value="food">Food</option>
                    <option value="shopping">Shopping</option>
                    <option value="transport">Transport</option>
                    <option value="entertainment">Entertainment</option>
                    <option value="bills">Bills</option>
                    <option value="fuel">Fuel</option>
                    <option value="medical">Medical</option>
                    <option value="travel">Travel</option>
                    <option value="other">Other</option>
                </select>
                <input type="date" id="transactionDate" class="w-full p-3 border border-gray-300 rounded-lg">
                <div class="flex gap-2">
                    <button id="saveTransactionBtn" class="flex-1 bg-green-500 text-white py-2 rounded-lg hover:bg-green-600">Add Transaction</button>
                    <button id="cancelTransactionBtn" class="flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Card Modal -->
    <div id="editCardModal" class="fixed inset-0 bg-black bg-opacity-50 modal flex items-center justify-center p-4 z-50" style="display: none;">
        <div class="bg-white rounded-xl p-6 w-full max-w-md max-h-[90vh] overflow-y-auto">
            <h3 class="text-lg font-semibold mb-4">Edit Card</h3>
            <div class="space-y-4">
                <input type="text" id="editCardName" placeholder="Card Name" class="w-full p-3 border border-gray-300 rounded-lg">
                <input type="number" id="editCardLimit" placeholder="Credit Limit" class="w-full p-3 border border-gray-300 rounded-lg">
                <input type="number" id="editCardBalance" placeholder="Current Balance" class="w-full p-3 border border-gray-300 rounded-lg">
                <input type="date" id="editCardDueDate" class="w-full p-3 border border-gray-300 rounded-lg">
                <div>
                    <p class="text-sm text-gray-600 mb-2">Choose card color:</p>
                    <div id="editColorPicker" class="flex gap-2 flex-wrap">
                        <!-- Color buttons will be inserted here -->
                    </div>
                </div>
                <div class="flex gap-2">
                    <button id="updateCardBtn" class="flex-1 bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600">Save</button>
                    <button id="cancelEditCardBtn" class="flex-1 bg-gray-500 text-white py-2 rounded-lg hover:bg-gray-600">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Application state
        let cards = JSON.parse(localStorage.getItem('creditCards') || '[]');
        let transactions = JSON.parse(localStorage.getItem('transactions') || '[]');
        let activeTab = 'cards';
        let editingCardId = null;
        let selectedCardColor = '#3B82F6';
        let selectedEditCardColor = '#3B82F6';

        // Card colors
        const cardColors = ['#3B82F6', '#EF4444', '#10B981', '#F59E0B', '#8B5CF6', '#EC4899', '#06B6D4', '#84CC16'];

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('App initializing...');
            initializeColorPickers();
            setupEventListeners();
            updateDisplay();
            setTodayDate();
        });

        function setTodayDate() {
            const today = new Date().toISOString().split('T')[0];
            const transactionDateEl = document.getElementById('transactionDate');
            if (transactionDateEl) {
                transactionDateEl.value = today;
            }
        }

        function initializeColorPickers() {
            const colorPicker = document.getElementById('colorPicker');
            const editColorPicker = document.getElementById('editColorPicker');
            
            cardColors.forEach((color, index) => {
                // Add card color picker
                const button = document.createElement('button');
                button.type = 'button';
                button.className = `w-8 h-8 rounded-full border-2 ${index === 0 ? 'border-gray-800' : 'border-gray-300'}`;
                button.style.backgroundColor = color;
                button.onclick = () => selectColor(color, false);
                colorPicker.appendChild(button);

                // Edit card color picker
                const editButton = document.createElement('button');
                editButton.type = 'button';
                editButton.className = `w-8 h-8 rounded-full border-2 border-gray-300`;
                editButton.style.backgroundColor = color;
                editButton.onclick = () => selectColor(color, true);
                editColorPicker.appendChild(editButton);
            });
        }

        function selectColor(color, isEdit) {
            if (isEdit) {
                selectedEditCardColor = color;
                document.querySelectorAll('#editColorPicker button').forEach(btn => {
                    btn.className = btn.style.backgroundColor === color ? 
                        'w-8 h-8 rounded-full border-2 border-gray-800' : 
                        'w-8 h-8 rounded-full border-2 border-gray-300';
                });
            } else {
                selectedCardColor = color;
                document.querySelectorAll('#colorPicker button').forEach(btn => {
                    btn.className = btn.style.backgroundColor === color ? 
                        'w-8 h-8 rounded-full border-2 border-gray-800' : 
                        'w-8 h-8 rounded-full border-2 border-gray-300';
                });
            }
        }

        function setupEventListeners() {
            console.log('Setting up event listeners...');
            
            // Tab switching
            document.getElementById('cardsTab').addEventListener('click', () => switchTab('cards'));
            document.getElementById('transactionsTab').addEventListener('click', () => switchTab('transactions'));

            // Modal controls
            document.getElementById('addCardBtn').addEventListener('click', () => showModal('addCardModal'));
            document.getElementById('addTransactionBtn').addEventListener('click', () => showModal('addTransactionModal'));
            
            // Cancel buttons
            document.getElementById('cancelCardBtn').addEventListener('click', () => hideModal('addCardModal'));
            document.getElementById('cancelTransactionBtn').addEventListener('click', () => hideModal('addTransactionModal'));
            document.getElementById('cancelEditCardBtn').addEventListener('click', () => hideModal('editCardModal'));

            // Save buttons
            document.getElementById('saveCardBtn').addEventListener('click', addCard);
            document.getElementById('saveTransactionBtn').addEventListener('click', addTransaction);
            document.getElementById('updateCardBtn').addEventListener('click', updateCard);

            // Input validation
            document.getElementById('cardLastFour').addEventListener('input', function(e) {
                e.target.value = e.target.value.replace(/\D/g, '');
            });
        }

        function switchTab(tab) {
            console.log('Switching to tab:', tab);
            activeTab = tab;
            
            // Update tab buttons
            document.getElementById('cardsTab').className = tab === 'cards' ? 
                'flex-1 py-3 text-center font-medium text-blue-600 border-b-2 border-blue-600' :
                'flex-1 py-3 text-center font-medium text-gray-500';
            
            document.getElementById('transactionsTab').className = tab === 'transactions' ? 
                'flex-1 py-3 text-center font-medium text-blue-600 border-b-2 border-blue-600' :
                'flex-1 py-3 text-center font-medium text-gray-500';

            // Show/hide sections
            document.getElementById('cardsSection').style.display = tab === 'cards' ? 'block' : 'none';
            document.getElementById('transactionsSection').style.display = tab === 'transactions' ? 'block' : 'none';
        }

        function showModal(modalId) {
            console.log('Showing modal:', modalId);
            document.getElementById(modalId).style.display = 'flex';
            if (modalId === 'addTransactionModal') {
                updateTransactionCardSelect();
            }
        }

        function hideModal(modalId) {
            console.log('Hiding modal:', modalId);
            document.getElementById(modalId).style.display = 'none';
            if (modalId === 'addCardModal') {
                clearCardForm();
            } else if (modalId === 'addTransactionModal') {
                clearTransactionForm();
            }
        }

        function clearCardForm() {
            document.getElementById('cardName').value = '';
            document.getElementById('cardLastFour').value = '';
            document.getElementById('cardLimit').value = '';
            document.getElementById('cardBalance').value = '';
            document.getElementById('cardDueDate').value = '';
            selectedCardColor = '#3B82F6';
            selectColor('#3B82F6', false);
        }

        function clearTransactionForm() {
            document.getElementById('transactionCard').value = '';
            document.getElementById('transactionDesc').value = '';
            document.getElementById('transactionAmount').value = '';
            document.getElementById('transactionType').value = 'expense';
            document.getElementById('transactionCategory').value = 'general';
            setTodayDate();
        }

        function addCard() {
            console.log('Adding card...');
            const name = document.getElementById('cardName').value.trim();
            const lastFour = document.getElementById('cardLastFour').value.trim();
            const limit = parseFloat(document.getElementById('cardLimit').value) || 0;
            const balance = parseFloat(document.getElementById('cardBalance').value) || 0;
            const dueDate = document.getElementById('cardDueDate').value;

            if (!name || !lastFour) {
                alert('Please enter card name and last 4 digits');
                return;
            }

            const card = {
                id: Date.now().toString(),
                name,
                lastFourDigits: lastFour,
                creditLimit: limit,
                currentBalance: balance,
                dueDate,
                color: selectedCardColor,
                createdAt: new Date().toISOString()
            };

            cards.push(card);
            console.log('Card added:', card);
            saveData();
            updateDisplay();
            hideModal('addCardModal');
        }

        function deleteCard(cardId) {
            if (confirm('Are you sure you want to delete this card?')) {
                cards = cards.filter(card => card.id !== cardId);
                transactions = transactions.filter(t => t.cardId !== cardId);
                saveData();
                updateDisplay();
            }
        }

        function editCard(cardId) {
            const card = cards.find(c => c.id === cardId);
            if (!card) return;

            editingCardId = cardId;
            selectedEditCardColor = card.color;

            document.getElementById('editCardName').value = card.name;
            document.getElementById('editCardLimit').value = card.creditLimit;
            document.getElementById('editCardBalance').value = card.currentBalance;
            document.getElementById('editCardDueDate').value = card.dueDate;
            
            selectColor(card.color, true);
            showModal('editCardModal');
        }

        function updateCard() {
            if (!editingCardId) return;

            const name = document.getElementById('editCardName').value.trim();
            const limit = parseFloat(document.getElementById('editCardLimit').value) || 0;
            const balance = parseFloat(document.getElementById('editCardBalance').value) || 0;
            const dueDate = document.getElementById('editCardDueDate').value;

            cards = cards.map(card => 
                card.id === editingCardId ? {
                    ...card,
                    name,
                    creditLimit: limit,
                    currentBalance: balance,
                    dueDate,
                    color: selectedEditCardColor
                } : card
            );

            editingCardId = null;
            saveData();
            updateDisplay();
            hideModal('editCardModal');
        }

        function togglePayment(cardId) {
            console.log('Toggling payment for card:', cardId);
            const paymentDiv = document.getElementById(`payment-${cardId}`);
            if (paymentDiv) {
                const isVisible = paymentDiv.style.display !== 'none';
                paymentDiv.style.display = isVisible ? 'none' : 'block';
                if (!isVisible) {
                    const amountInput = document.getElementById(`amount-${cardId}`);
                    if (amountInput) {
                        amountInput.focus();
                    }
                }
            }
        }

        function confirmPayment(cardId) {
            console.log('Confirming payment for card:', cardId);
            const amountInput = document.getElementById(`amount-${cardId}`);
            if (amountInput) {
                const amount = amountInput.value;
                if (amount && parseFloat(amount) > 0) {
                    payBill(cardId, amount);
                    amountInput.value = '';
                    const paymentDiv = document.getElementById(`payment-${cardId}`);
                    if (paymentDiv) {
                        paymentDiv.style.display = 'none';
                    }
                }
            }
        }

        function cancelPayment(cardId) {
            console.log('Cancelling payment for card:', cardId);
            const amountInput = document.getElementById(`amount-${cardId}`);
            const paymentDiv = document.getElementById(`payment-${cardId}`);
            if (amountInput) {
                amountInput.value = '';
            }
            if (paymentDiv) {
                paymentDiv.style.display = 'none';
            }
        }

        function payBill(cardId, amount) {
            console.log('Paying bill for card:', cardId, 'amount:', amount);
            const paymentAmount = parseFloat(amount);
            if (!paymentAmount || paymentAmount <= 0) return;

            // Add payment transaction
            const payment = {
                id: Date.now().toString(),
                cardId,
                description: 'Bill Payment',
                amount: paymentAmount,
                type: 'payment',
                category: 'payment',
                date: new Date().toISOString().split('T')[0],
                createdAt: new Date().toISOString()
            };

            transactions.unshift(payment);

            // Update card balance
            cards = cards.map(card => 
                card.id === cardId 
                    ? { ...card, currentBalance: Math.max(0, card.currentBalance - paymentAmount) }
                    : card
            );

            saveData();
            updateDisplay();
        }

        function addTransaction() {
            console.log('Adding transaction...');
            const cardId = document.getElementById('transactionCard').value;
            const description = document.getElementById('transactionDesc').value.trim();
            const amount = parseFloat(document.getElementById('transactionAmount').value);
            const type = document.getElementById('transactionType').value;
            const category = document.getElementById('transactionCategory').value;
            const date = document.getElementById('transactionDate').value;

            if (!cardId || !description || !amount) {
                alert('Please fill in all required fields');
                return;
            }

            const transaction = {
                id: Date.now().toString(),
                cardId,
                description,
                amount,
                type,
                category,
                date,
                createdAt: new Date().toISOString()
            };

            transactions.unshift(transaction);

            // Update card balance
            cards = cards.map(card => {
                if (card.id === cardId) {
                    const balanceChange = type === 'expense' ? amount : -amount;
                    return {
                        ...card,
                        currentBalance: type === 'payment' ? 
                            Math.max(0, card.currentBalance - amount) :
                            card.currentBalance + balanceChange
                    };
                }
                return card;
            });

            saveData();
            updateDisplay();
            hideModal('addTransactionModal');
        }

        function updateTransactionCardSelect() {
            const select = document.getElementById('transactionCard');
            select.innerHTML = '<option value="">Select Card</option>';
            
            cards.forEach(card => {
                const option = document.createElement('option');
                option.value = card.id;
                option.textContent = `${card.name} (...${card.lastFourDigits})`;
                select.appendChild(option);
            });
        }

        function getCardTransactions(cardId) {
            return transactions.filter(t => t.cardId === cardId);
        }

        function saveData() {
            localStorage.setItem('creditCards', JSON.stringify(cards));
            localStorage.setItem('transactions', JSON.stringify(transactions));
        }

        function updateDisplay() {
            console.log('Updating display...');
            updateCardsDisplay();
            updateTransactionsDisplay();
            updateSummaryStats();
        }

        function updateCardsDisplay() {
            const cardsList = document.getElementById('cardsList');
            const noCards = document.getElementById('noCards');

            if (cards.length === 0) {
                cardsList.innerHTML = '';
                noCards.style.display = 'block';
            } else {
                noCards.style.display = 'none';
                cardsList.innerHTML = cards.map(card => createCardHTML(card)).join('');
            }
        }

        function createCardHTML(card) {
            const utilization = card.creditLimit > 0 ? (card.currentBalance / card.creditLimit) * 100 : 0;
            const utilizationColor = utilization > 80 ? 'bg-red-500' : utilization > 60 ? 'bg-yellow-500' : 'bg-green-500';
            const cardTransactions = getCardTransactions(card.id);
            
            return `
                <div class="bg-white rounded-xl shadow-lg p-6 mb-4">
                    <div class="w-full h-48 rounded-lg mb-4 p-4 text-white relative overflow-hidden card-gradient" style="background-color: ${card.color};">
                        <div class="absolute inset-0 bg-gradient-to-br from-white/10 to-transparent"></div>
                        <div class="relative z-10">
                            <div class="flex justify-between items-start mb-8">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect width="20" height="14" x="2" y="5" rx="2"></rect>
                                    <path d="M2 10h20"></path>
                                </svg>
                                <div class="flex gap-2">
                                    <button onclick="editCard('${card.id}')" class="p-1 bg-white/20 rounded hover:bg-white/30">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="m18 2 4 4-14 14H4v-4L18 2z"></path>
                                        </svg>
                                    </button>
                                    <button onclick="deleteCard('${card.id}')" class="p-1 bg-white/20 rounded hover:bg-white/30">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <polyline points="3,6 5,6 21,6"></polyline>
                                            <path d="m19,6v14a2,2 0,0 1,-2,2H7a2,2 0,0 1,-2-2V6m3,0V4a2,2 0,0 1,2-2h4a2,2 0,0 1,2,2V6"></path>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="text-lg font-semibold mb-2">${card.name}</div>
                            <div class="text-sm opacity-90">**** **** **** ${card.lastFourDigits}</div>
                            <div class="text-xl font-bold mt-4">₹${card.currentBalance.toLocaleString()}</div>
                            <div class="text-sm opacity-90">of ₹${card.creditLimit.toLocaleString()}</div>
                        </div>
                    </div>

                    <div class="space-y-3">
                        <div class="flex justify-between text-sm">
                            <span>Utilization</span>
                            <span class="${utilization > 80 ? 'text-red-500 font-semibold' : 'text-gray-600'}">${utilization.toFixed(1)}%</span>
                        </div>
                        
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div class="h-2 rounded-full ${utilizationColor} utilization-bar" style="width: ${Math.min(utilization, 100)}%"></div>
                        </div>

                        ${card.dueDate ? `
                        <div class="flex justify-between text-sm">
                            <span>Due Date</span>
                            <span>${new Date(card.dueDate).toLocaleDateString()}</span>
                        </div>
                        ` : ''}

                        <div class="flex gap-2 mt-4">
                            <button onclick="togglePayment('${card.id}')" class="flex-1 bg-green-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-green-600 transition-colors">
                                Pay Bill
                            </button>
                        </div>

                        <div id="payment-${card.id}" class="mt-4 p-4 bg-gray-50 rounded-lg" style="display: none;">
                            <div class="flex gap-2">
                                <input type="number" id="amount-${card.id}" placeholder="Payment amount" class="flex-1 p-2 border border-gray-300 rounded-lg">
                                <button onclick="confirmPay
